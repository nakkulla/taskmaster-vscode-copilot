---
description: "코드 품질 향상 및 지속적 개선 가이드라인"
applyTo: "**"
---

# 코드 품질 향상 및 지속적 개선 가이드

## 개선 트리거 조건

다음과 같은 상황에서 코드 개선을 고려하세요:

### 새로운 패턴 발견
- 기존 가이드라인에 포함되지 않은 새로운 코드 패턴
- 여러 파일에서 반복되는 유사한 구현 방식
- 예방 가능한 공통 오류 패턴
- 일관되게 사용되는 새로운 라이브러리나 도구
- 코드베이스에서 새롭게 나타나는 모범 사례

### 분석 프로세스

1. **패턴 비교 분석**
   - 새로운 코드와 기존 가이드라인 비교
   - 표준화해야 할 패턴 식별
   - 외부 문서 참조 확인

2. **오류 패턴 모니터링**
   - 일관된 오류 처리 패턴 점검
   - 테스트 패턴 및 커버리지 모니터링
   - 보안 및 성능 패턴 추적

## 가이드라인 업데이트 규칙

### 새로운 규칙 추가 조건
- 새로운 기술/패턴이 3개 이상의 파일에서 사용될 때
- 공통 버그를 규칙으로 예방할 수 있을 때
- 코드 리뷰에서 동일한 피드백이 반복될 때
- 새로운 보안 또는 성능 패턴이 나타날 때

### 기존 규칙 수정 조건
- 코드베이스에 더 나은 예제가 존재할 때
- 추가적인 엣지 케이스가 발견될 때
- 관련 규칙들이 업데이트될 때
- 구현 세부사항이 변경될 때

## 패턴 인식 예시

### TypeScript/JavaScript 패턴
```typescript
// 반복되는 패턴 발견 시:
const data = await prisma.user.findMany({
  select: { id: true, email: true },
  where: { status: 'ACTIVE' }
});

// 다음과 같은 가이드라인 추가 고려:
// - 표준 select 필드 정의
// - 공통 where 조건 패턴
// - 성능 최적화 패턴
```

### React 컴포넌트 패턴
```jsx
// 공통 상태 관리 패턴
const [loading, setLoading] = useState(false);
const [error, setError] = useState(null);

// 가이드라인에 추가할 내용:
// - 표준 상태 관리 패턴
// - 에러 처리 방식
// - 로딩 상태 관리
```

## 품질 검증 기준

### 규칙 품질 체크리스트
- [ ] 실행 가능하고 구체적인 지침인가?
- [ ] 실제 코드에서 나온 예제를 포함하는가?
- [ ] 최신 참조 문서를 사용하는가?
- [ ] 패턴이 일관되게 적용되는가?

### MCP 도구를 활용한 품질 향상 프로세스

#### 패턴 분석 및 개선
```typescript
// 새로운 패턴 발견 시 MCP 도구 활용
// 1. sequentialthinking으로 패턴의 장단점 분석
// 2. mcp_tavily-search로 업계 표준과 비교
// 3. mcp_context7로 관련 라이브러리 문서 확인
// 4. research로 프로젝트 컨텍스트에 맞는 개선안 도출
// 5. add_task로 개선 작업 계획
// 6. mcp_obsidian으로 새로운 가이드라인 문서화
```

#### 지속적 모니터링
```typescript
// 코드 품질 모니터링을 위한 MCP 도구 활용
// 1. mcp_github_search_code로 패턴 사용 빈도 추적
// 2. mcp_github_list_issues로 반복되는 문제점 식별
// 3. sequentialthinking으로 근본 원인 분석
// 4. 개선 방안을 update_task로 기록
// 5. 효과 측정을 위한 메트릭 설정
```

## 규칙 폐기 및 마이그레이션

### 폐기 대상 규칙
- 더 이상 적용되지 않는 오래된 패턴
- 사용되지 않는 라이브러리 관련 규칙
- 더 나은 대안이 나타난 규칙

### 폐기 프로세스
1. 더 이상 사용되지 않는 패턴을 deprecated로 표시
2. 적용되지 않는 규칙 제거
3. 폐기된 규칙에 대한 참조 업데이트
4. 기존 패턴에서 새 패턴으로의 마이그레이션 경로 문서화

## 문서화 업데이트

### 지속적 문서 관리
- 예제를 코드와 동기화
- 외부 문서 참조 업데이트
- 관련 규칙 간 링크 유지
- 주요 변경사항 문서화

### Taskmaster 연동
- 코드 개선 작업을 `add_task`로 추가
- 복잡한 리팩터링은 `expand_task`로 세분화
- 진행 상황을 `update_subtask`로 기록
- 완료된 개선사항을 `set_task_status`로 관리

## 실제 적용 예시

### 1. 새로운 패턴 발견
```javascript
// 여러 파일에서 발견된 패턴
const handleApiError = (error) => {
  console.error('API 오류:', error);
  toast.error('요청 처리 중 오류가 발생했습니다.');
};
```

### 2. 개선 작업 생성
- Taskmaster에서 `add_task`로 "API 오류 처리 패턴 표준화" 작업 생성
- 관련 파일들 분석 및 공통 패턴 추출
- 표준 오류 처리 가이드라인 작성

### 3. 적용 및 검증
- 새로운 가이드라인을 팀에 공유
- 코드 리뷰에서 일관성 검증
- 피드백을 바탕으로 가이드라인 개선

이 가이드를 통해 코드베이스를 지속적으로 개선하고 일관된 품질을 유지하세요.
